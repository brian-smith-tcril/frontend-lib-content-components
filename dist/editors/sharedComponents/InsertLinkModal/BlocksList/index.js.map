{"version":3,"file":"index.js","names":["_react","require","_propTypes","_interopRequireDefault","_paragon","_icons","_i18n","_blockTypes","_utils","_messages","_jsxRuntime","obj","__esModule","default","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","key","value","_toPropertyKey","configurable","writable","i","_toPrimitive","String","Symbol","toPrimitive","call","TypeError","Number","BlocksList","_ref","blocks","onBlockSelected","disableBlocks","intl","useIntl","messageBlockType","blockTypes","section","formatMessage","messages","blocksListSubsectionTitle","subsection","blocksListUnitTitle","unit","blockState","setBlockState","useState","blockSelected","type","hasNavigated","blocksNavigated","sections","getSectionsList","subsections","getChildrenFromList","listItems","isBlockSelectedUnit","blockNameButtonClass","handleSelectBlock","block","navigate","undefined","id","handleGoBack","newValue","lastBlockIndex","blockId","newBlock","jsxs","Fragment","children","ActionRow","className","jsx","Button","variant","onClick","iconBefore","ArrowBack","map","TransitionReplace","disabled","displayName","iconAfter","ArrowForwardIos","blockShape","PropTypes","shape","string","isRequired","lmsWebUrl","legacyWebUrl","studentViewUrl","arrayOf","defaultProps","propTypes","objectOf","func","bool","_default","exports"],"sources":["../../../../../src/editors/sharedComponents/InsertLinkModal/BlocksList/index.jsx"],"sourcesContent":["import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, TransitionReplace, ActionRow } from '@openedx/paragon';\nimport { ArrowForwardIos, ArrowBack } from '@openedx/paragon/icons';\nimport { useIntl } from '@edx/frontend-platform/i18n';\n\nimport blockTypes from '../blockTypes';\nimport { getSectionsList, getChildrenFromList } from './utils';\n\nimport messages from './messages';\nimport './index.scss';\n\nconst BlocksList = ({\n  blocks,\n  onBlockSelected,\n  disableBlocks,\n}) => {\n  const intl = useIntl();\n  const messageBlockType = {\n    [blockTypes.section]: intl.formatMessage(\n      messages.blocksListSubsectionTitle,\n    ),\n    [blockTypes.subsection]: intl.formatMessage(messages.blocksListUnitTitle),\n    [blockTypes.unit]: intl.formatMessage(messages.blocksListUnitTitle),\n  };\n\n  const [blockState, setBlockState] = useState({\n    blockSelected: {},\n    type: blockTypes.subsection,\n    hasNavigated: false,\n    blocksNavigated: [],\n  });\n\n  const sections = getSectionsList(blocks);\n  const subsections = getChildrenFromList(\n    blockState.blockSelected,\n    blocks,\n  );\n  const listItems = blockState.hasNavigated ? subsections : sections;\n\n  const isBlockSelectedUnit = blockState.type === blockTypes.unit;\n  const blockNameButtonClass = isBlockSelectedUnit ? 'col-12' : 'col-11';\n\n  const handleSelectBlock = (block, navigate = false) => {\n    if (navigate) {\n      setBlockState({\n        ...blockState,\n        blocksNavigated: [...blockState.blocksNavigated, block.id],\n        blockSelected: block,\n        type: block.type,\n        hasNavigated: true,\n      });\n    } else {\n      onBlockSelected(block);\n    }\n  };\n\n  const handleGoBack = () => {\n    const newValue = blockState.blocksNavigated.filter(\n      (id) => id !== blockState.blockSelected.id,\n    );\n    if (newValue.length) {\n      const lastBlockIndex = newValue.length - 1;\n      const blockId = newValue[lastBlockIndex];\n      const newBlock = blocks[blockId];\n      setBlockState({\n        ...blockState,\n        type: newBlock.type,\n        hasNavigated: true,\n        blockSelected: newBlock,\n        blocksNavigated: newValue,\n      });\n    } else {\n      setBlockState({\n        ...blockState,\n        type: blockState.section,\n        hasNavigated: false,\n        blockSelected: {},\n      });\n    }\n  };\n\n  return (\n    <>\n      {blockState.hasNavigated && (\n        <ActionRow className=\"w-100 d-flex justify-content-space-between p-3\">\n          <Button\n            variant=\"tertiary\"\n            className=\"col-1\"\n            onClick={handleGoBack}\n            iconBefore={ArrowBack}\n            data-testid=\"block-back-navigation\"\n          >\n          &nbsp;\n          </Button>\n          <p className=\"col-11 text-center\">{messageBlockType[blockState.type]}</p>\n        </ActionRow>\n      )}\n      <div className=\"block-list-container\">\n        {listItems.map((block) => (\n          <TransitionReplace key={`transition_${block.id}`}>\n            <ActionRow\n              key={block.id}\n              className=\"w-100 d-flex justify-content-space-between p-3\"\n            >\n              <Button\n                variant=\"tertiary\"\n                className={`${blockNameButtonClass} py-4`}\n                onClick={() => handleSelectBlock(block)}\n                data-testid=\"block-name\"\n                disabled={disableBlocks}\n              >\n                <span className=\"w-100 text-left\">{block.displayName}</span>\n              </Button>\n              {!isBlockSelectedUnit && (\n                <Button\n                  variant=\"tertiary\"\n                  className=\"col-1 py-4\"\n                  onClick={() => handleSelectBlock(block, true)}\n                  data-testid=\"block-navigation\"\n                  iconAfter={ArrowForwardIos}\n                  disabled={disableBlocks}\n                >\n                &nbsp;\n                </Button>\n              )}\n            </ActionRow>\n          </TransitionReplace>\n        ))}\n      </div>\n    </>\n  );\n};\n\nconst blockShape = PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  blockId: PropTypes.string.isRequired,\n  lmsWebUrl: PropTypes.string.isRequired,\n  legacyWebUrl: PropTypes.string.isRequired,\n  studentViewUrl: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  displayName: PropTypes.string.isRequired,\n  children: PropTypes.arrayOf(PropTypes.string),\n});\n\nBlocksList.defaultProps = {\n  disableBlocks: false,\n};\n\nBlocksList.propTypes = {\n  blocks: PropTypes.objectOf(blockShape).isRequired,\n  onBlockSelected: PropTypes.func.isRequired,\n  disableBlocks: PropTypes.bool,\n};\n\nexport default BlocksList;\n"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,UAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,QAAA,GAAAH,OAAA;AACA,IAAAI,MAAA,GAAAJ,OAAA;AACA,IAAAK,KAAA,GAAAL,OAAA;AAEA,IAAAM,WAAA,GAAAJ,sBAAA,CAAAF,OAAA;AACA,IAAAO,MAAA,GAAAP,OAAA;AAEA,IAAAQ,SAAA,GAAAN,sBAAA,CAAAF,OAAA;AACAA,OAAA;AAAsB,IAAAS,WAAA,GAAAT,OAAA;AAAA,SAAAE,uBAAAQ,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAAA,SAAAG,QAAAC,CAAA,EAAAC,CAAA,QAAAC,CAAA,GAAAC,MAAA,CAAAC,IAAA,CAAAJ,CAAA,OAAAG,MAAA,CAAAE,qBAAA,QAAAC,CAAA,GAAAH,MAAA,CAAAE,qBAAA,CAAAL,CAAA,GAAAC,CAAA,KAAAK,CAAA,GAAAA,CAAA,CAAAC,MAAA,WAAAN,CAAA,WAAAE,MAAA,CAAAK,wBAAA,CAAAR,CAAA,EAAAC,CAAA,EAAAQ,UAAA,OAAAP,CAAA,CAAAQ,IAAA,CAAAC,KAAA,CAAAT,CAAA,EAAAI,CAAA,YAAAJ,CAAA;AAAA,SAAAU,cAAAZ,CAAA,aAAAC,CAAA,MAAAA,CAAA,GAAAY,SAAA,CAAAC,MAAA,EAAAb,CAAA,UAAAC,CAAA,WAAAW,SAAA,CAAAZ,CAAA,IAAAY,SAAA,CAAAZ,CAAA,QAAAA,CAAA,OAAAF,OAAA,CAAAI,MAAA,CAAAD,CAAA,OAAAa,OAAA,WAAAd,CAAA,IAAAe,eAAA,CAAAhB,CAAA,EAAAC,CAAA,EAAAC,CAAA,CAAAD,CAAA,SAAAE,MAAA,CAAAc,yBAAA,GAAAd,MAAA,CAAAe,gBAAA,CAAAlB,CAAA,EAAAG,MAAA,CAAAc,yBAAA,CAAAf,CAAA,KAAAH,OAAA,CAAAI,MAAA,CAAAD,CAAA,GAAAa,OAAA,WAAAd,CAAA,IAAAE,MAAA,CAAAgB,cAAA,CAAAnB,CAAA,EAAAC,CAAA,EAAAE,MAAA,CAAAK,wBAAA,CAAAN,CAAA,EAAAD,CAAA,iBAAAD,CAAA;AAAA,SAAAgB,gBAAApB,GAAA,EAAAwB,GAAA,EAAAC,KAAA,IAAAD,GAAA,GAAAE,cAAA,CAAAF,GAAA,OAAAA,GAAA,IAAAxB,GAAA,IAAAO,MAAA,CAAAgB,cAAA,CAAAvB,GAAA,EAAAwB,GAAA,IAAAC,KAAA,EAAAA,KAAA,EAAAZ,UAAA,QAAAc,YAAA,QAAAC,QAAA,oBAAA5B,GAAA,CAAAwB,GAAA,IAAAC,KAAA,WAAAzB,GAAA;AAAA,SAAA0B,eAAApB,CAAA,QAAAuB,CAAA,GAAAC,YAAA,CAAAxB,CAAA,uCAAAuB,CAAA,GAAAA,CAAA,GAAAE,MAAA,CAAAF,CAAA;AAAA,SAAAC,aAAAxB,CAAA,EAAAD,CAAA,2BAAAC,CAAA,KAAAA,CAAA,SAAAA,CAAA,MAAAF,CAAA,GAAAE,CAAA,CAAA0B,MAAA,CAAAC,WAAA,kBAAA7B,CAAA,QAAAyB,CAAA,GAAAzB,CAAA,CAAA8B,IAAA,CAAA5B,CAAA,EAAAD,CAAA,uCAAAwB,CAAA,SAAAA,CAAA,YAAAM,SAAA,yEAAA9B,CAAA,GAAA0B,MAAA,GAAAK,MAAA,EAAA9B,CAAA;AAEtB,MAAM+B,UAAU,GAAGC,IAAA,IAIb;EAAA,IAJc;IAClBC,MAAM;IACNC,eAAe;IACfC;EACF,CAAC,GAAAH,IAAA;EACC,MAAMI,IAAI,GAAG,IAAAC,aAAO,EAAC,CAAC;EACtB,MAAMC,gBAAgB,GAAG;IACvB,CAACC,mBAAU,CAACC,OAAO,GAAGJ,IAAI,CAACK,aAAa,CACtCC,iBAAQ,CAACC,yBACX,CAAC;IACD,CAACJ,mBAAU,CAACK,UAAU,GAAGR,IAAI,CAACK,aAAa,CAACC,iBAAQ,CAACG,mBAAmB,CAAC;IACzE,CAACN,mBAAU,CAACO,IAAI,GAAGV,IAAI,CAACK,aAAa,CAACC,iBAAQ,CAACG,mBAAmB;EACpE,CAAC;EAED,MAAM,CAACE,UAAU,EAAEC,aAAa,CAAC,GAAG,IAAAC,eAAQ,EAAC;IAC3CC,aAAa,EAAE,CAAC,CAAC;IACjBC,IAAI,EAAEZ,mBAAU,CAACK,UAAU;IAC3BQ,YAAY,EAAE,KAAK;IACnBC,eAAe,EAAE;EACnB,CAAC,CAAC;EAEF,MAAMC,QAAQ,GAAG,IAAAC,sBAAe,EAACtB,MAAM,CAAC;EACxC,MAAMuB,WAAW,GAAG,IAAAC,0BAAmB,EACrCV,UAAU,CAACG,aAAa,EACxBjB,MACF,CAAC;EACD,MAAMyB,SAAS,GAAGX,UAAU,CAACK,YAAY,GAAGI,WAAW,GAAGF,QAAQ;EAElE,MAAMK,mBAAmB,GAAGZ,UAAU,CAACI,IAAI,KAAKZ,mBAAU,CAACO,IAAI;EAC/D,MAAMc,oBAAoB,GAAGD,mBAAmB,GAAG,QAAQ,GAAG,QAAQ;EAEtE,MAAME,iBAAiB,GAAG,SAAAA,CAACC,KAAK,EAAuB;IAAA,IAArBC,QAAQ,GAAApD,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAqD,SAAA,GAAArD,SAAA,MAAG,KAAK;IAChD,IAAIoD,QAAQ,EAAE;MACZf,aAAa,CAAAtC,aAAA,CAAAA,aAAA,KACRqC,UAAU;QACbM,eAAe,EAAE,CAAC,GAAGN,UAAU,CAACM,eAAe,EAAES,KAAK,CAACG,EAAE,CAAC;QAC1Df,aAAa,EAAEY,KAAK;QACpBX,IAAI,EAAEW,KAAK,CAACX,IAAI;QAChBC,YAAY,EAAE;MAAI,EACnB,CAAC;IACJ,CAAC,MAAM;MACLlB,eAAe,CAAC4B,KAAK,CAAC;IACxB;EACF,CAAC;EAED,MAAMI,YAAY,GAAGA,CAAA,KAAM;IACzB,MAAMC,QAAQ,GAAGpB,UAAU,CAACM,eAAe,CAAChD,MAAM,CAC/C4D,EAAE,IAAKA,EAAE,KAAKlB,UAAU,CAACG,aAAa,CAACe,EAC1C,CAAC;IACD,IAAIE,QAAQ,CAACvD,MAAM,EAAE;MACnB,MAAMwD,cAAc,GAAGD,QAAQ,CAACvD,MAAM,GAAG,CAAC;MAC1C,MAAMyD,OAAO,GAAGF,QAAQ,CAACC,cAAc,CAAC;MACxC,MAAME,QAAQ,GAAGrC,MAAM,CAACoC,OAAO,CAAC;MAChCrB,aAAa,CAAAtC,aAAA,CAAAA,aAAA,KACRqC,UAAU;QACbI,IAAI,EAAEmB,QAAQ,CAACnB,IAAI;QACnBC,YAAY,EAAE,IAAI;QAClBF,aAAa,EAAEoB,QAAQ;QACvBjB,eAAe,EAAEc;MAAQ,EAC1B,CAAC;IACJ,CAAC,MAAM;MACLnB,aAAa,CAAAtC,aAAA,CAAAA,aAAA,KACRqC,UAAU;QACbI,IAAI,EAAEJ,UAAU,CAACP,OAAO;QACxBY,YAAY,EAAE,KAAK;QACnBF,aAAa,EAAE,CAAC;MAAC,EAClB,CAAC;IACJ;EACF,CAAC;EAED,oBACE,IAAAzD,WAAA,CAAA8E,IAAA,EAAA9E,WAAA,CAAA+E,QAAA;IAAAC,QAAA,GACG1B,UAAU,CAACK,YAAY,iBACtB,IAAA3D,WAAA,CAAA8E,IAAA,EAACpF,QAAA,CAAAuF,SAAS;MAACC,SAAS,EAAC,gDAAgD;MAAAF,QAAA,gBACnE,IAAAhF,WAAA,CAAAmF,GAAA,EAACzF,QAAA,CAAA0F,MAAM;QACLC,OAAO,EAAC,UAAU;QAClBH,SAAS,EAAC,OAAO;QACjBI,OAAO,EAAEb,YAAa;QACtBc,UAAU,EAAEC,gBAAU;QACtB,eAAY,uBAAuB;QAAAR,QAAA,EACpC;MAED,CAAQ,CAAC,eACT,IAAAhF,WAAA,CAAAmF,GAAA;QAAGD,SAAS,EAAC,oBAAoB;QAAAF,QAAA,EAAEnC,gBAAgB,CAACS,UAAU,CAACI,IAAI;MAAC,CAAI,CAAC;IAAA,CAChE,CACZ,eACD,IAAA1D,WAAA,CAAAmF,GAAA;MAAKD,SAAS,EAAC,sBAAsB;MAAAF,QAAA,EAClCf,SAAS,CAACwB,GAAG,CAAEpB,KAAK,iBACnB,IAAArE,WAAA,CAAAmF,GAAA,EAACzF,QAAA,CAAAgG,iBAAiB;QAAAV,QAAA,eAChB,IAAAhF,WAAA,CAAA8E,IAAA,EAACpF,QAAA,CAAAuF,SAAS;UAERC,SAAS,EAAC,gDAAgD;UAAAF,QAAA,gBAE1D,IAAAhF,WAAA,CAAAmF,GAAA,EAACzF,QAAA,CAAA0F,MAAM;YACLC,OAAO,EAAC,UAAU;YAClBH,SAAS,EAAG,GAAEf,oBAAqB,OAAO;YAC1CmB,OAAO,EAAEA,CAAA,KAAMlB,iBAAiB,CAACC,KAAK,CAAE;YACxC,eAAY,YAAY;YACxBsB,QAAQ,EAAEjD,aAAc;YAAAsC,QAAA,eAExB,IAAAhF,WAAA,CAAAmF,GAAA;cAAMD,SAAS,EAAC,iBAAiB;cAAAF,QAAA,EAAEX,KAAK,CAACuB;YAAW,CAAO;UAAC,CACtD,CAAC,EACR,CAAC1B,mBAAmB,iBACnB,IAAAlE,WAAA,CAAAmF,GAAA,EAACzF,QAAA,CAAA0F,MAAM;YACLC,OAAO,EAAC,UAAU;YAClBH,SAAS,EAAC,YAAY;YACtBI,OAAO,EAAEA,CAAA,KAAMlB,iBAAiB,CAACC,KAAK,EAAE,IAAI,CAAE;YAC9C,eAAY,kBAAkB;YAC9BwB,SAAS,EAAEC,sBAAgB;YAC3BH,QAAQ,EAAEjD,aAAc;YAAAsC,QAAA,EACzB;UAED,CAAQ,CACT;QAAA,GAvBIX,KAAK,CAACG,EAwBF;MAAC,GA1BW,cAAaH,KAAK,CAACG,EAAG,EA2B5B,CACpB;IAAC,CACC,CAAC;EAAA,CACN,CAAC;AAEP,CAAC;AAED,MAAMuB,UAAU,GAAGC,kBAAS,CAACC,KAAK,CAAC;EACjCzB,EAAE,EAAEwB,kBAAS,CAACE,MAAM,CAACC,UAAU;EAC/BvB,OAAO,EAAEoB,kBAAS,CAACE,MAAM,CAACC,UAAU;EACpCC,SAAS,EAAEJ,kBAAS,CAACE,MAAM,CAACC,UAAU;EACtCE,YAAY,EAAEL,kBAAS,CAACE,MAAM,CAACC,UAAU;EACzCG,cAAc,EAAEN,kBAAS,CAACE,MAAM,CAACC,UAAU;EAC3CzC,IAAI,EAAEsC,kBAAS,CAACE,MAAM,CAACC,UAAU;EACjCP,WAAW,EAAEI,kBAAS,CAACE,MAAM,CAACC,UAAU;EACxCnB,QAAQ,EAAEgB,kBAAS,CAACO,OAAO,CAACP,kBAAS,CAACE,MAAM;AAC9C,CAAC,CAAC;AAEF5D,UAAU,CAACkE,YAAY,GAAG;EACxB9D,aAAa,EAAE;AACjB,CAAC;AAEDJ,UAAU,CAACmE,SAAS,GAAG;EACrBjE,MAAM,EAAEwD,kBAAS,CAACU,QAAQ,CAACX,UAAU,CAAC,CAACI,UAAU;EACjD1D,eAAe,EAAEuD,kBAAS,CAACW,IAAI,CAACR,UAAU;EAC1CzD,aAAa,EAAEsD,kBAAS,CAACY;AAC3B,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAA3G,OAAA,GAEamC,UAAU"}