{"version":3,"file":"hooks.js","names":["_react","_interopRequireDefault","require","_reactRedux","_module","_interopRequireWildcard","_messages","appHooks","_redux","_analyticsEvt","_utils","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","navigateCallback","navigateTo","exports","useSearchAndSortProps","searchString","setSearchString","React","useState","sortBy","setSortBy","sortKeys","dateNewest","filterBy","setFilterBy","filterKeys","anyStatus","hideSelectedVideos","setHideSelectedVideos","onSearchChange","e","clearSearchString","onSortClick","sortMessages","onFilterClick","filterMessages","showSwitch","switchMessage","messages","hideSelectedCourseVideosSwitchLabel","onSwitchClick","filterListBySearch","_ref","videoList","_ref2","displayName","toLowerCase","includes","filterListByStatus","_ref3","statusFilter","_ref4","status","filterListByHideSelectedCourse","_ref5","filterList","_ref6","videos","filteredList","module","sort","sortFunctions","useVideoListProps","_ref7","searchSortProps","highlighted","setHighlighted","showSelectVideoError","setShowSelectVideoError","showSizeError","setShowSizeError","learningContextId","useSelector","selectors","app","blockId","galleryError","show","dismiss","message","selectVideoError","inputError","fileSizeError","galleryProps","galleryIsEmpty","searchIsEmpty","displayList","onHighlightChange","emptyGalleryLabel","showIdsOnCards","height","selectBtnProps","onClick","useVideoUploadHandler","_ref8","replace","path","window","location","useCancelHandler","destination","returnUrl","analytics","analyticsEvent","analyticsEvt","videoGalleryCancelClick","buildVideos","_ref9","rawVideos","rawVideoList","values","map","video","id","edx_video_id","client_video_id","externalUrl","course_video_image_url","dateAdded","Date","created","locked","thumbnail","statusBadgeVariant","getstatusBadgeVariant","duration","transcripts","_ref10","failed","uploading","processing","useVideoProps","_ref11","fileInput","click","_default"],"sources":["../../../../src/editors/containers/VideoGallery/hooks.js"],"sourcesContent":["import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport * as module from './hooks';\nimport messages from './messages';\nimport * as appHooks from '../../hooks';\nimport { selectors } from '../../data/redux';\nimport analyticsEvt from '../../data/constants/analyticsEvt';\nimport {\n  filterKeys, filterMessages, sortFunctions, sortKeys, sortMessages,\n} from './utils';\n\nexport const {\n  navigateCallback,\n  navigateTo,\n} = appHooks;\n\nexport const useSearchAndSortProps = () => {\n  const [searchString, setSearchString] = React.useState('');\n  const [sortBy, setSortBy] = React.useState(sortKeys.dateNewest);\n  const [filterBy, setFilterBy] = React.useState(filterKeys.anyStatus);\n  const [hideSelectedVideos, setHideSelectedVideos] = React.useState(false);\n\n  return {\n    searchString,\n    onSearchChange: (e) => setSearchString(e.target.value),\n    clearSearchString: () => setSearchString(''),\n    sortBy,\n    onSortClick: (key) => () => setSortBy(key),\n    sortKeys,\n    sortMessages,\n    filterBy,\n    onFilterClick: (key) => () => setFilterBy(key),\n    filterKeys,\n    filterMessages,\n    showSwitch: false,\n    hideSelectedVideos,\n    switchMessage: messages.hideSelectedCourseVideosSwitchLabel,\n    onSwitchClick: () => setHideSelectedVideos(!hideSelectedVideos),\n  };\n};\n\nexport const filterListBySearch = ({\n  searchString,\n  videoList,\n}) => (\n  videoList.filter(({ displayName }) => displayName.toLowerCase()\n    .includes(searchString.toLowerCase()))\n);\n\nexport const filterListByStatus = ({ statusFilter, videoList }) => {\n  if (statusFilter === filterKeys.anyStatus) {\n    return videoList;\n  }\n  // TODO deal with translation mismatch because the video status is\n  // already translated in the backend\n  return videoList.filter(({ status }) => filterKeys[statusFilter] === status);\n};\n\nexport const filterListByHideSelectedCourse = ({ videoList }) => (\n  // TODO Missing to implement this\n  videoList\n);\n\nexport const filterList = ({\n  sortBy,\n  filterBy,\n  searchString,\n  videos,\n}) => {\n  let filteredList = module.filterListBySearch({\n    searchString,\n    videoList: videos,\n  });\n  filteredList = module.filterListByStatus({\n    statusFilter: filterBy,\n    videoList: filteredList,\n  });\n  filteredList = module.filterListByHideSelectedCourse({\n    videoList: filteredList,\n  });\n  return filteredList.sort(sortFunctions[sortBy in sortKeys ? sortKeys[sortBy] : sortKeys.dateNewest]);\n};\n\nexport const useVideoListProps = ({\n  searchSortProps,\n  videos,\n}) => {\n  const [highlighted, setHighlighted] = React.useState(null);\n  const [\n    showSelectVideoError,\n    setShowSelectVideoError,\n  ] = React.useState(false);\n  const [\n    showSizeError,\n    setShowSizeError,\n  ] = React.useState(false);\n  const filteredList = module.filterList({\n    ...searchSortProps,\n    videos,\n  });\n  const learningContextId = useSelector(selectors.app.learningContextId);\n  const blockId = useSelector(selectors.app.blockId);\n  return {\n    galleryError: {\n      show: showSelectVideoError,\n      set: () => setShowSelectVideoError(true),\n      dismiss: () => setShowSelectVideoError(false),\n      message: messages.selectVideoError,\n    },\n    // TODO We need to update this message when implementing the video upload screen\n    inputError: {\n      show: showSizeError,\n      set: () => setShowSizeError(true),\n      dismiss: () => setShowSelectVideoError(false),\n      message: messages.fileSizeError,\n    },\n    galleryProps: {\n      galleryIsEmpty: Object.keys(filteredList).length === 0,\n      searchIsEmpty: filteredList.length === 0,\n      displayList: filteredList,\n      highlighted,\n      onHighlightChange: (e) => setHighlighted(e.target.value),\n      emptyGalleryLabel: messages.emptyGalleryLabel,\n      showIdsOnCards: true,\n      height: '100%',\n    },\n    selectBtnProps: {\n      onClick: () => {\n        if (highlighted) {\n          navigateTo(`/course/${learningContextId}/editor/video/${blockId}?selectedVideoId=${highlighted}`);\n        } else {\n          setShowSelectVideoError(true);\n        }\n      },\n    },\n  };\n};\n\nexport const useVideoUploadHandler = ({ replace }) => {\n  const learningContextId = useSelector(selectors.app.learningContextId);\n  const blockId = useSelector(selectors.app.blockId);\n  const path = `/course/${learningContextId}/editor/video_upload/${blockId}`;\n  if (replace) {\n    return () => window.location.replace(path);\n  }\n  return () => navigateTo(path);\n};\n\nexport const useCancelHandler = () => (\n  navigateCallback({\n    destination: useSelector(selectors.app.returnUrl),\n    analytics: useSelector(selectors.app.analytics),\n    analyticsEvent: analyticsEvt.videoGalleryCancelClick,\n  })\n);\n\nexport const buildVideos = ({ rawVideos }) => {\n  let videos = [];\n  const rawVideoList = Object.values(rawVideos);\n  if (rawVideoList.length > 0) {\n    videos = rawVideoList.map(video => ({\n      id: video.edx_video_id,\n      displayName: video.client_video_id,\n      externalUrl: video.course_video_image_url,\n      dateAdded: new Date(video.created),\n      locked: false,\n      thumbnail: video.course_video_image_url,\n      status: video.status,\n      statusBadgeVariant: module.getstatusBadgeVariant({ status: video.status }),\n      duration: video.duration,\n      transcripts: video.transcripts,\n    }));\n  }\n  return videos;\n};\n\nexport const getstatusBadgeVariant = ({ status }) => {\n  switch (status) {\n    // TODO deal with translation mismatch\n    case filterKeys.failed:\n      return 'danger';\n    case filterKeys.uploading:\n    case filterKeys.processing:\n      return 'light';\n    default:\n      return null;\n  }\n};\n\nexport const useVideoProps = ({ videos }) => {\n  const searchSortProps = useSearchAndSortProps();\n  const videoList = useVideoListProps({\n    searchSortProps,\n    videos,\n  });\n  const {\n    galleryError,\n    galleryProps,\n    inputError,\n    selectBtnProps,\n  } = videoList;\n  const fileInput = { click: useVideoUploadHandler({ replace: false }) };\n\n  return {\n    galleryError,\n    inputError,\n    fileInput,\n    galleryProps,\n    searchSortProps,\n    selectBtnProps,\n  };\n};\n\nexport default {\n  useVideoProps,\n  buildVideos,\n  useCancelHandler,\n  useVideoUploadHandler,\n};\n"],"mappings":"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"}