{"version":3,"file":"index.js","names":["_react","_interopRequireWildcard","require","_paragon","_reactRedux","_redux","_hooks","_interopRequireDefault","_SelectionModal","_utils","_messages","_requests","_videoThumbnail","_jsxRuntime","obj","__esModule","default","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","VideoGallery","rawVideos","useSelector","selectors","app","videos","isLoaded","state","requests","isFinished","requestKey","RequestKeys","fetchVideos","isFetchError","isFailed","isUploadError","uploadVideo","hooks","buildVideos","handleVideoUpload","useVideoUploadHandler","replace","useEffect","galleryError","inputError","fileInput","galleryProps","searchSortProps","selectBtnProps","useVideoProps","handleCancel","useCancelHandler","modalMessages","confirmMsg","messages","selectVideoButtonlabel","titleMsg","titleLabel","uploadButtonMsg","uploadButtonLabel","fetchError","fetchVideosError","uploadError","uploadVideoError","thumbnailFallback","jsx","Image","thumbnail","className","src","videoThumbnail","isOpen","close","size","isFullscreenScroll","acceptedFiles","acceptedImgKeys","exports","propTypes","_default"],"sources":["../../../../src/editors/containers/VideoGallery/index.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Image } from '@edx/paragon';\nimport { useSelector } from 'react-redux';\nimport { selectors } from '../../data/redux';\nimport hooks from './hooks';\nimport SelectionModal from '../../sharedComponents/SelectionModal';\nimport { acceptedImgKeys } from './utils';\nimport messages from './messages';\nimport { RequestKeys } from '../../data/constants/requests';\nimport videoThumbnail from '../../data/images/videoThumbnail.svg';\n\nexport const VideoGallery = () => {\n  const rawVideos = useSelector(selectors.app.videos);\n  const isLoaded = useSelector(\n    (state) => selectors.requests.isFinished(state, { requestKey: RequestKeys.fetchVideos }),\n  );\n  const isFetchError = useSelector(\n    (state) => selectors.requests.isFailed(state, { requestKey: RequestKeys.fetchVideos }),\n  );\n  const isUploadError = useSelector(\n    (state) => selectors.requests.isFailed(state, { requestKey: RequestKeys.uploadVideo }),\n  );\n  const videos = hooks.buildVideos({ rawVideos });\n  const handleVideoUpload = hooks.useVideoUploadHandler({ replace: true });\n\n  useEffect(() => {\n    // If no videos exists redirects to the video upload screen\n    if (isLoaded && videos.length === 0) {\n      handleVideoUpload();\n    }\n  }, [isLoaded]);\n  const {\n    galleryError,\n    inputError,\n    fileInput,\n    galleryProps,\n    searchSortProps,\n    selectBtnProps,\n  } = hooks.useVideoProps({ videos });\n  const handleCancel = hooks.useCancelHandler();\n\n  const modalMessages = {\n    confirmMsg: messages.selectVideoButtonlabel,\n    titleMsg: messages.titleLabel,\n    uploadButtonMsg: messages.uploadButtonLabel,\n    fetchError: messages.fetchVideosError,\n    uploadError: messages.uploadVideoError,\n  };\n\n  const thumbnailFallback = (\n    <Image\n      thumbnail\n      className=\"px-6 py-4.5 h-100\"\n      src={videoThumbnail}\n    />\n  );\n\n  return (\n    <SelectionModal\n      {...{\n        isOpen: true,\n        close: handleCancel,\n        size: 'fullscreen',\n        isFullscreenScroll: false,\n        galleryError,\n        inputError,\n        fileInput,\n        galleryProps: {\n          ...galleryProps,\n          thumbnailFallback,\n        },\n        searchSortProps,\n        selectBtnProps,\n        acceptedFiles: acceptedImgKeys,\n        modalMessages,\n        isLoaded,\n        isUploadError,\n        isFetchError,\n      }}\n    />\n  );\n};\n\nVideoGallery.propTypes = {};\n\nexport default VideoGallery;\n"],"mappings":"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"}